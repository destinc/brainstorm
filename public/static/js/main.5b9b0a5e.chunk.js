(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[0],{33:function(e,t,a){},38:function(e,t,a){e.exports=a(72)},43:function(e,t,a){},45:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(19),i=a.n(o),c=a(18),s=(a(43),a(7)),l=a(2),u=a.n(l),d=a(8),p=a(9),h=a(10),m=a(12),f=a(11),g=a(13),b=(a(45),a(14)),v=a.n(b),y=a(20),E=a.n(y),O=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(){a.props.onClick(a.props.idea.id)},a.handleDelete=function(){a.props.onDelete(a.props.idea.id)},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"post-it"},r.a.createElement("span",{className:"deleteButton",onClick:this.handleDelete},"x"),r.a.createElement("h4",{className:"note-title",onClick:this.handleClick},this.props.idea.title),r.a.createElement("p",{className:"note-body",onClick:this.handleClick},this.props.idea.body))}}]),t}(n.Component),w=(a(33),function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).handleInput=function(e){a.props.resetNotification(),a.setState(Object(s.a)({},e.target.name,e.target.value))},a.handleBlur=function(){var e={title:a.state.title,body:a.state.body};v.a.put("http://localhost:3000/ideas/".concat(a.props.idea.id),{idea:e}).then((function(e){console.log(e),a.props.updateIdea(e.data)})).catch((function(e){return console.log(e)}))},a.state={title:a.props.idea.title,body:a.props.idea.body},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"post-it"},r.a.createElement("form",{onBlur:this.handleBlur},r.a.createElement("input",{className:"note-text",type:"text",name:"title",placeholder:"Enter a Title",value:this.state.title,onChange:this.handleInput,ref:this.props.titleRef}),r.a.createElement("textarea",{className:"note-text",name:"body",placeholder:"Describe your idea",value:this.state.body,onChange:this.handleInput})))}}]),t}(n.Component)),j=a(37);function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var I={transition:"background ".concat(1e3,"ms ease-in-out, opacity ").concat(1e3,"ms ease-in-out"),opacity:0,padding:"10px"},D={entering:{opacity:1,background:"lightgreen"},entered:{opacity:1}},N=function(e){var t=e.in,a=e.notification;return r.a.createElement(j.a,{in:t,timeout:1e3},(function(e){return r.a.createElement("span",{style:C({},I,{},D[e])},a)}))},x=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).addNewIdea=function(){v.a.post({idea:{title:"",body:""}}).then((function(e){var t=E()(a.state.ideas,{$splice:[[0,0,e.data]]});a.setState({ideas:t,editingIdeaId:e.data.id})})).catch((function(e){return console.log(e)}))},a.updateIdea=function(e){var t=a.state.ideas.findIndex((function(t){return t.id===e.id})),n=E()(a.state.ideas,Object(s.a)({},t,{$set:e}));a.setState({ideas:n,notification:"Idea saved",transitionIn:!0})},a.deleteIdea=function(e){v.a.delete("".concat(e)).then((function(t){var n=a.state.ideas.findIndex((function(t){return t.id===e})),r=E()(a.state.ideas,{$splice:[[n,1]]});a.setState({ideas:r})})).catch((function(e){return console.log(e)}))},a.resetNotification=function(){a.setState({notification:"",transitionIn:!1})},a.enableEditing=function(e){a.setState({editingIdeaId:e},(function(){a.title.focus()}))},a.state={ideas:[],editingIdeaId:null,notification:"",transitionIn:!1},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;v.a.get().then((function(t){e.setState({ideas:t.data})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("button",{className:"newIdeaButton",onClick:this.addNewIdea},"New Idea"),r.a.createElement(N,{in:this.state.transitionIn,notification:this.state.notification})),this.state.ideas.map((function(t){return e.state.editingIdeaId===t.id?r.a.createElement(w,{idea:t,key:t.id,updateIdea:e.updateIdea,titleRef:function(t){return e.title=t},resetNotification:e.resetNotification}):r.a.createElement(O,{idea:t,key:t.id,onClick:e.enableEditing,onDelete:e.deleteIdea})})))}}]),t}(n.Component),P=a(16),S=(a(66),function(e){return r.a.createElement("div",{className:"auth-container"},r.a.createElement("h2",{className:"log-title"},"login"),r.a.createElement("br",null),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.handleLogin()}},r.a.createElement("p",null,"Username:"),r.a.createElement("input",{name:"username",type:"text",value:e.formData.username,onChange:e.handleChange}),r.a.createElement("p",null,"Password:"),r.a.createElement("input",{name:"password",type:"password",value:e.formData.password,onChange:e.handleChange}),r.a.createElement("br",null),r.a.createElement("button",{className:"Login"},"Login"),r.a.createElement(c.b,{to:"/register",className:"register"},"Register")))}),L=function(e){return r.a.createElement("div",{className:"auth-container"},r.a.createElement("h2",null,"Register"),r.a.createElement("br",null),r.a.createElement("form",{onSubmit:e.handleRegister},r.a.createElement("p",null,"Username:"),r.a.createElement("input",{name:"username",type:"text",value:e.formData.username,onChange:e.handleChange}),r.a.createElement("p",null,"Email:"),r.a.createElement("input",{name:"email",type:"text",value:e.formData.email,onChange:e.handleChange}),r.a.createElement("p",null,"Password:"),r.a.createElement("input",{name:"password",type:"password",value:e.formData.password,onChange:e.handleChange}),r.a.createElement("br",null),r.a.createElement("button",{className:"register"},"Register")))},B=v.a.create({baseURL:""}),R=function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.post("/auth/login",t);case 2:return a=e.sent,console.log(a),localStorage.setItem("authToken",a.data.token),B.defaults.headers.common.authorization="Bearer ".concat(a.data.token),e.abrupt("return",a.data.user);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.post("/users/",{user:t});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var H=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={currentUser:null,authFormData:{username:"",email:"",password:""}},a.handleLoginButton=function(){a.props.history.push("/login")},a.handleLogin=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(a.state.authFormData);case 2:t=e.sent,a.setState({currentUser:t}),a.props.history.push("/notes");case 5:case"end":return e.stop()}}),e)}))),a.handleRegister=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,F(a.state.authFormData);case 3:a.handleLogin(),a.props.history.push("/notes");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleLogout=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("jwt"),a.setState({currentUser:null}),a.props.history.push("/");case 3:case"end":return e.stop()}}),e)}))),a.authHandleChange=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target,r=n.name,o=n.value,a.setState((function(e){return{authFormData:A({},e.authFormData,Object(s.a)({},r,o))}}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"App-header"},r.a.createElement("h1",{className:"header-title"},"Brainstorm")),r.a.createElement("div",null,this.state.currentUser?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"user-name"},"Hello ",this.state.currentUser.username),r.a.createElement("button",{className:"logout",onClick:this.handleLogout},"Logout")):""),r.a.createElement(P.a,{exact:!0,path:"/notes",render:function(){return r.a.createElement(x,null)}}),r.a.createElement(P.a,{exact:!0,path:"/",render:function(){return r.a.createElement(S,{handleLogin:e.handleLogin,handleChange:e.authHandleChange,formData:e.state.authFormData})}}),r.a.createElement(P.a,{exact:!0,path:"/register",render:function(){return r.a.createElement(L,{handleRegister:e.handleRegister,handleChange:e.authHandleChange,formData:e.state.authFormData})}}))}}]),t}(n.Component),$=Object(P.e)(H);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(c.a,null,r.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[38,1,2]]]);
//# sourceMappingURL=main.5b9b0a5e.chunk.js.map